# Server 1 - Basic web server
server
{
    listen 127.0.0.1:80;
    server_name website.com www.website.com;
    root /var/www/website;
    index index.html;
    autoindex off;

    location /
    {
        methods GET;
    }

    location /static
    {
        root /var/www/website/assets;
        autoindex on;
        methods GET;
    }
}

# Server 2 - API server
server
{
    listen 127.0.0.1:8080;
    server_name api.website.com;
    root /var/www/api;

    location /
    {
        methods GET POST;
    }

    location /upload
    {
        upload_path /var/uploads;
        methods POST;
    }

    location /data
    {
        return 301 /api/v1/data;
    }
}

# Server 3 - Error handling server
server
{
    listen 127.0.0.1:9000;
    server_name admin.website.com;
    root /var/www/admin;

    error_page 404 /admin/404.html;
    error_page 500 /admin/500.html;

    location /
    {
        index admin.html;
        methods GET;
    }

    location /reports
    {
        autoindex on;
        methods GET;
    }
}
